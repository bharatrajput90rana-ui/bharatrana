# AttendanceHub ğŸ“š

A modern, production-ready attendance management system with advanced features including:
- ğŸ¯ **Multi-role access control** (Admin, Teacher, Student)
- ğŸ“± **QR Code scanning** for quick verification
- ğŸ‘¤ **AI-powered face recognition** with liveness detection
- ğŸ“ **GPS location validation** to ensure physical presence
- ğŸ“Š **Comprehensive analytics** and reporting
- ğŸ” **Secure JWT authentication** with encrypted passwords

## Quick Links

- ğŸš€ [Quick Start Guide](./SETUP_GUIDE.md)
- ğŸ“– [Project Architecture](./AGENTS.md)
- ğŸ”§ [API Documentation](./API.md)

## ğŸŒŸ Key Features

### Admin Role
âœ“ Create and manage teacher accounts  
âœ“ View system-wide attendance reports  
âœ“ Monitor teacher and student performance  
âœ“ Access comprehensive analytics  

### Teacher Role
âœ“ Create and manage multiple classes  
âœ“ Add and organize students  
âœ“ Generate QR codes for attendance sessions  
âœ“ Set GPS coordinates for class locations  
âœ“ View detailed attendance analytics  
âœ“ Monitor attendance trends and statistics  

### Student Role
âœ“ View enrolled classes  
âœ“ Mark attendance with three-step verification  
âœ“ Track personal attendance history  
âœ“ View weekly and monthly statistics  
âœ“ Biometric authentication via face recognition  

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend (React)                 â”‚
â”‚  - Modern UI with TailwindCSS                       â”‚
â”‚  - Role-based dashboards                            â”‚
â”‚  - Face recognition (face-api.js)                   â”‚
â”‚  - QR scanner integration                           â”‚
â”‚  - GPS location validation                          ï¿½ï¿½
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ REST API
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Backend (Express)                   â”‚
â”‚  - RESTful API endpoints                            â”‚
â”‚  - JWT authentication                               â”‚
â”‚  - Role-based access control                        â”‚
â”‚  - Real-time data processing                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MongoDB Database                       â”‚
â”‚  - User accounts (admin, teacher, student)          â”‚
â”‚  - Class management                                 â”‚
â”‚  - Attendance records                               â”‚
â”‚  - Face embeddings & biometric data                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“± Tech Stack

### Frontend
- **React 18** - Modern UI framework
- **TypeScript** - Type-safe code
- **TailwindCSS 3** - Utility-first styling
- **Vite** - Lightning-fast build tool
- **React Router 6** - Client-side routing
- **Radix UI** - Accessible components
- **face-api.js** - Facial recognition
- **React Query** - Data fetching & caching

### Backend
- **Express.js** - Lightweight server framework
- **MongoDB** - NoSQL database
- **Mongoose** - ODM for MongoDB
- **JWT** - Secure authentication
- **bcryptjs** - Password hashing
- **TypeScript** - Type-safe backend

### DevTools
- **Vitest** - Fast unit testing
- **Prettier** - Code formatting
- **ESLint** - Code quality

## ğŸ¯ Three-Step Attendance Marking

### Step 1: QR Code Verification
Students scan a unique QR code generated by the teacher for each class session.

### Step 2: Face Recognition
Advanced AI-powered facial recognition with liveness detection ensures the person is physically present and not using a photo.

### Step 3: GPS Location Validation
GPS coordinates confirm the student is within the allowed physical proximity of the classroom.

**Result**: Attendance is marked as present only when all three validations pass.

## ğŸ“Š Analytics Features

### For Teachers
- **Class-level analytics**: Overall attendance trends per class
- **Student-level analytics**: Individual attendance records and patterns
- **Daily trends**: Visualization of attendance patterns over time
- **Performance metrics**: Identify at-risk students with low attendance

### For Students
- **Personal statistics**: Attendance percentage and breakdown
- **Weekly tracking**: Day-by-day attendance records
- **Class breakdown**: Attendance by individual class
- **Visual reports**: Charts showing attendance trends

### For Admins
- **System-wide overview**: Aggregate statistics across all classes
- **Teacher performance**: Track teacher class management and student engagement
- **Detailed reports**: Access complete attendance logs
- **Trend analysis**: Identify patterns and issues

## ğŸ” Security Features

- **Password Hashing**: bcryptjs with 10 salt rounds
- **JWT Authentication**: 7-day token expiration
- **Role-based Access Control**: Granular permission management
- **Secure API Routes**: Middleware-based authentication
- **Input Validation**: Zod schema validation
- **CORS Protection**: Cross-origin request handling

## ğŸ“ˆ Database Schema

### Users Table
```typescript
{
  username: string (unique)
  email: string (unique)
  password: string (hashed)
  role: "admin" | "teacher" | "student"
  firstName: string
  lastName: string
  teacherId?: ObjectId (for students)
  createdAt, updatedAt: Date
}
```

### Classes Table
```typescript
{
  name: string
  description?: string
  teacherId: ObjectId
  students: ObjectId[]
  qrCode?: string
  gpsLatitude?: number
  gpsLongitude?: number
  gpsAccuracy?: number
  createdAt, updatedAt: Date
}
```

### Attendance Table
```typescript
{
  studentId: ObjectId
  classId: ObjectId
  teacherId: ObjectId
  date: Date
  status: "present" | "absent" | "late"
  qrScanned: boolean
  gpsMasched: boolean
  faceMatched: boolean
  faceConfidence?: number (0-1)
  gpsLatitude?: number
  gpsLongitude?: number
  markedAt: Date
  createdAt: Date
}
```

### FaceData Table
```typescript
{
  userId: ObjectId (unique)
  profilePhoto: string (base64)
  faceEmbedding: number[] (512 dimensions)
  descriptors: number[][]
  livenessScore?: number
  createdAt, updatedAt: Date
}
```

## ğŸš€ Getting Started

### Prerequisites
- Node.js 16+
- MongoDB running locally
- Modern web browser with camera

### Installation

1. **Clone and setup**
```bash
pnpm install
cp .env.example .env
```

2. **Seed demo data**
```bash
pnpm seed
```

3. **Start development server**
```bash
pnpm dev
```

4. **Access the app**
Open [http://localhost:8080](http://localhost:8080)

### Demo Credentials
- **Admin**: `admin` / `admin123`
- **Teacher**: `teacher1` / `teacher123`
- **Student**: `student1` / `student123`

## ğŸ“‹ Available Scripts

```bash
pnpm dev           # Start development server
pnpm build         # Build for production
pnpm start         # Start production server
pnpm test          # Run tests
pnpm typecheck     # TypeScript validation
pnpm format.fix    # Format code with Prettier
pnpm seed          # Seed database with demo data
```

## ğŸ“ Project Features Implemented

### âœ… Completed Features
- [x] Multi-role authentication system (Admin, Teacher, Student)
- [x] JWT-based secure authentication
- [x] Role-based access control middleware
- [x] Admin dashboard with teacher management
- [x] Teacher dashboard with class management
- [x] Student dashboard with attendance marking
- [x] QR code generation and scanning
- [x] GPS location validation
- [x] Face recognition with liveness detection
- [x] Attendance record management
- [x] Analytics and reporting dashboards
- [x] Weekly attendance tracking
- [x] Student performance metrics
- [x] Responsive design for all screen sizes
- [x] Modern UI with TailwindCSS
- [x] Database seeding with demo data

### ğŸ”„ Future Enhancements
- [ ] Real-time notifications
- [ ] Automated absence reports
- [ ] Parent notifications
- [ ] Bulk attendance import/export
- [ ] Advanced biometric matching
- [ ] Mobile app native support
- [ ] Offline attendance marking
- [ ] Payment integration
- [ ] Multi-language support
- [ ] Custom report generation

## ğŸ“ API Quick Reference

### Authentication
```
POST /api/auth/register     # Create new user
POST /api/auth/login        # Login user
GET /api/auth/verify        # Verify token
```

### Admin
```
GET /api/admin/teachers              # List teachers
POST /api/admin/teachers             # Add teacher
DELETE /api/admin/teachers/:id       # Delete teacher
GET /api/admin/attendance            # All attendance records
```

### Teacher
```
GET /api/teacher/classes                      # List classes
POST /api/teacher/classes                     # Create class
GET /api/teacher/classes/:classId/analytics   # Class analytics
POST /api/teacher/classes/:classId/qrcode     # Generate QR
POST /api/teacher/classes/:classId/gps        # Set GPS
```

### Student
```
GET /api/student/classes                      # Enrolled classes
POST /api/student/face-data                   # Upload face
POST /api/student/classes/:classId/attendance # Mark attendance
GET /api/student/attendance                   # History
GET /api/student/stats/weekly                 # Weekly stats
```

## ğŸ¨ UI/UX Design

- **Modern aesthetic** with gradient backgrounds
- **Intuitive navigation** with clear role-based menus
- **Responsive design** works on desktop, tablet, mobile
- **Accessible components** using Radix UI
- **Smooth animations** with Framer Motion
- **Toast notifications** for user feedback
- **Dark mode support** with CSS variables

## ğŸ”§ Configuration

All configurations are in `.env`:

```env
MONGODB_URI=mongodb://localhost:27017/attendance-system
JWT_SECRET=your-secret-key
PORT=5000
NODE_ENV=development
FACE_MATCH_THRESHOLD=0.6
GPS_ACCURACY_THRESHOLD_METERS=50
```

## ğŸ› Troubleshooting

### MongoDB Connection Failed
```bash
# Check if MongoDB is running
mongosh

# Or start MongoDB
mongod
```

### Port Already in Use
```bash
# Change port in .env
PORT=3001
```

### Build Errors
```bash
# Clear cache and reinstall
rm -rf node_modules pnpm-lock.yaml
pnpm install
```

## ğŸ“š Learning Resources

- [React Documentation](https://react.dev)
- [MongoDB Documentation](https://docs.mongodb.com)
- [Express.js Guide](https://expressjs.com)
- [TailwindCSS Docs](https://tailwindcss.com)
- [face-api.js](https://github.com/vladmandic/face-api)

## ğŸ“„ License

This project is provided as-is for educational and commercial use.

## ğŸ¤ Contributing

Contributions are welcome! Please follow the existing code style and create pull requests for any improvements.

## ğŸ“ Support

For issues or questions:
1. Check the [SETUP_GUIDE.md](./SETUP_GUIDE.md)
2. Review [AGENTS.md](./AGENTS.md) for architecture details
3. Check error logs in console/terminal

---

**Built with â¤ï¸ using modern web technologies**

AttendanceHub - Making attendance tracking simple, secure, and smart. ğŸ“âœ¨
